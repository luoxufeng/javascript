<html>
<head>
    <meta charset="utf-8">
	<title>倒计时</title>
</head>
<body>
<div id="main">
    <input type="text" id="txtTime">
	<input type="button" id="btnStart" value="开始">
	<input type="button" id="btnEnd" value="停止">
</div>
	<script>
     function getNum(maxnum,endnum){
     	if(maxnum<endnum){
     		maxnum=endnum;
     	}
     	if(endTag==30){
     		maxnum=endnum;
     	}
      document.getElementById("txtTime").value=maxnum;
    }
     
    var timer=null;
    var endTag=0;
    function startRun(maxnum,endnum){
    	 timer= setInterval(function() {
    	if(endTag<30)
    	{    
    		 endTag++;
    		 console.log("start endTag..="+endTag);
    		 maxnum=maxnum- Math.ceil(maxnum/30);
             getNum(maxnum,endnum)
           
    	}else{
    		clearInterval(timer)
            createHtml();
    	}
      
     }, 100);
    }

    var btn=document.getElementById("btnStart");
    var btnEnd=document.getElementById("btnEnd");
    btn.onclick=function(){
    	  startRun(100,5);
    }
    
    btnEnd.onclick=function(){
    	clearInterval(timer)
    }

    function createHtml(){
    	this.oCount = document.createElement("ul");
		this.oFrag = document.createDocumentFragment();
		this.oCount.className = "count";
		for (var i = 0; i < 5; i++)
		{
			var oLi = document.createElement("li");
			oLi.innerHTML = i + 1;
			this.oFrag.appendChild(oLi)
		}
		this.oCount.appendChild(this.oFrag);
		document.getElementById("main").appendChild(this.oCount)
    }
	</script>
</body>
</html>